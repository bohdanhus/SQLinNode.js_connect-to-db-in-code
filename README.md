# SQLinNode.js_connect-to-db-in-code

üíª–°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤#
–ü–æ–ª—É—á–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏–π –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

üíª API —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á#
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π CRUD –¥–ª—è API —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á.

Install#
sudo apt update
sudo apt install postgresql postgresql-contrib
Usage#
sudo -u postgres psql # connect to db using system user postgres
New user and database#
–í –∫–æ–º–∞–Ω–¥–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ psql (–∑–∞–º–µ–Ω–∏—Ç—å <username>, <database_name> –∏ –ø–∞—Ä–æ–ª—å –Ω–∞ —Ç–æ, —á—Ç–æ –≤–∞–º –Ω–∞–¥–æ):

–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

create user <username>;
–í–∫–ª—é—á–∏—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ—Å—Ç—É–ø –ø–æ –ø–∞—Ä–æ–ª—é:

alter user <username> with encrypted password '<password>';
–î–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—Å—è –ø—Ä–∞–≤–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –Ω–æ–≤–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö <database_name>:

grant all privileges on database <database_name> to <username>;
–ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:

postgres -h 127.0.0.1 <database_name> <username>
–ù–µ –∑–∞–±—ã–≤–∞–µ–º –∑–∞–º–µ–Ω–∏—Ç—å –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±–∞–∑—ã. –ö –ø—Ä–∏–º–µ—Ä—É, —É –≤–∞—Å –ø–æ–ª—É—á–∏—Ç—å—Å—è:

postgres -h 127.0.0.1 todolist todolist_app
CAUTION
–ö–æ–≥–¥–∞ –Ω–µ —É–∫–∞–∑–∞–Ω host —Å–µ—Ä–≤–µ—Ä–∞, —Å–µ—Ä–≤–µ—Ä –ø—É—Å—Ç–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ–≥–æ –∏–º—è –≤ –û–° —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–º—É, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—å. –≠—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ —Ñ–∞–π–ª–µ pg_hba.conf (–ø—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ –ø—É—Ç–∏ –¥–ª—è PostgreSQL –≤–µ—Ä—Å–∏–∏ 10 /etc/postgresql/10/main/pg_hba.conf). –ß—Ç–æ –±—ã –µ–µ "–æ–±–æ–π—Ç–∏" –Ω–∞–¥–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å host. –ó–∞ —ç—Ç–æ –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ –æ—Ç–≤–µ—á–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä -h 127.0.0.1.

üíª –†–∞–±–æ—Ç—ã —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ psql#

 –°–æ–∑–¥–∞—Ç—å –∏ –Ω–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å–æ —Å–ø–∏—Å–∫–æ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–¥–Ω—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è)
 –°–æ–∑–¥–∞—Ç—å –∏ –Ω–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –¥–ª—è —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á
